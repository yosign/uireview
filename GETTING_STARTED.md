# 🚀 快速开始指南

欢迎使用 Sprite GIF Generator！这是一个使用 Next.js + Shadcn UI 构建的精灵图动画生成工具。

## 📦 第一次使用

### 1. 安装依赖

```bash
cd sprite-gif-nextjs
npm install
```

### 2. 配置 API（二选一）

#### 方式 A: 使用环境变量（推荐）

```bash
# 复制配置模板
cp env.example.txt .env.local

# 编辑 .env.local，填入你的 API Key
nano .env.local  # 或使用其他编辑器
```

```env
NEXT_PUBLIC_DIFY_API_KEY=你的API密钥
NEXT_PUBLIC_DIFY_API_ENDPOINT=https://api.dify.ai/v1/chat-messages
```

#### 方式 B: 在界面输入

启动后在网页界面点击 "⚙️ API 配置" 输入即可。

### 3. 启动开发服务器

```bash
npm run dev
```

访问 http://localhost:3000

## 🎯 使用流程

### 步骤 1: 生成精灵图

1. **配置 API**（如果没有使用环境变量）
   - 点击 "⚙️ API 配置"
   - 输入 Dify API Key
   - 配置会自动保存

2. **上传图片**
   - 选择一张清晰的图片
   - 支持常见图片格式

3. **填写提示词**
   - 描述想要的动画效果
   - 例如："跑步动作"、"跳跃"、"挥手"

4. **选择风格和尺寸**
   - 风格：像素艺术、8位像素、16位像素等
   - 尺寸：1K (1024x1024)、2K、4K

5. **生成**
   - 点击 "🚀 开始生成精灵图"
   - 等待 AI 生成（通常需要 10-30 秒）
   - 自动跳转到步骤 2

### 步骤 2: 制作 GIF

1. **预览动画**
   - 精灵图自动加载
   - 点击 "▶️ 播放" 查看效果
   - 点击 "⏸️ 暂停" 停止播放

2. **调整参数**
   - **帧率 (FPS)**：控制播放速度（1-30）
   - **缩放比例**：调整输出大小（25%-200%）

3. **生成并下载**
   - 点击 "📥 生成并下载GIF"
   - 查看进度条
   - GIF 自动下载到本地

## ⚙️ 配置说明

### API 配置优先级

1. 环境变量 (.env.local) - **最高优先级**
2. 浏览器本地存储 - 界面输入后自动保存
3. 默认值

详细配置说明请查看 [ENV_CONFIG.md](./ENV_CONFIG.md)

## 🎨 界面特性

### API 配置区域

- ✅ **智能折叠**：有配置时自动隐藏
- ✅ **状态指示**：显示"已配置"标签
- ✅ **环境变量优先**：使用环境变量时自动禁用输入
- ✅ **自动保存**：浏览器本地保存配置

### 精灵图生成

- ✅ **实时预览**：上传后即刻预览
- ✅ **状态反馈**：实时显示上传/生成进度
- ✅ **错误提示**：详细的错误信息

### GIF 制作

- ✅ **实时预览**：调整参数即时更新
- ✅ **进度显示**：生成过程可视化
- ✅ **像素完美**：pixelated 渲染模式
- ✅ **完全本地**：GIF 在浏览器生成，无需上传

## 🔧 常用命令

```bash
# 开发模式
npm run dev

# 构建生产版本
npm run build

# 运行生产版本
npm start

# 类型检查
npm run type-check  # 需要添加到 package.json

# 清理重装
rm -rf node_modules .next
npm install
```

## 📁 项目结构

```
sprite-gif-nextjs/
├── app/
│   ├── page.tsx              # 步骤1: 生成精灵图
│   ├── generate-gif/
│   │   └── page.tsx          # 步骤2: 制作GIF
│   ├── layout.tsx            # 根布局
│   └── globals.css           # 全局样式
├── components/
│   └── ui/                   # Shadcn UI 组件
├── lib/
│   └── utils.ts              # 工具函数
├── public/                   # 静态资源
├── env.example.txt           # 环境变量示例
├── ENV_CONFIG.md             # 环境配置详细说明
├── README.md                 # 项目说明
└── GETTING_STARTED.md        # 本文件
```

## 💡 使用技巧

### 1. 提示词技巧

**好的提示词**：
- "一个像素风格的角色跑步动作"
- "小猫咪跳跃的连续动作"
- "机器人挥手打招呼"

**避免**：
- 太模糊："动作"
- 太复杂："一个在下雨天奔跑同时躲避障碍的角色"

### 2. 图片选择

- ✅ 主体清晰、背景简单
- ✅ 单个角色或物体
- ✅ 正面或侧面视角
- ❌ 多个对象
- ❌ 复杂背景
- ❌ 模糊不清

### 3. 参数调整

**帧率 (FPS)**：
- 低 (5-10)：慢动作、流畅
- 中 (10-15)：标准速度
- 高 (15-30)：快速、激烈动作

**缩放**：
- 25-50%：小尺寸、文件小
- 100%：原始尺寸
- 150-200%：大尺寸、细节好

## 🐛 常见问题

### Q: 点击"生成精灵图"没有反应？

A: 检查：
1. 是否填写了 API Key
2. 是否上传了图片
3. 是否填写了提示词
4. 浏览器控制台是否有错误

### Q: 精灵图生成失败？

A: 可能原因：
1. API Key 无效
2. 网络问题
3. Dify 服务暂时不可用
4. 图片格式不支持

### Q: GIF 生成很慢？

A: 这是正常的：
- 高分辨率需要更多时间
- 16 帧需要逐帧处理
- 建议先用 50% 缩放测试

### Q: 如何保存 API 配置？

A: 两种方式：
1. 使用环境变量（永久）
2. 在界面输入（自动保存到浏览器）

## 🔒 安全提示

1. **不要分享 API Key**
2. **不要提交 .env.local 到 Git**
3. **定期更换密钥**
4. **使用环境变量而非硬编码**

## 📚 更多文档

- [README.md](./README.md) - 项目概述和技术栈
- [ENV_CONFIG.md](./ENV_CONFIG.md) - 详细的环境配置说明
- [MIGRATION_GUIDE.md](./MIGRATION_GUIDE.md) - 从 HTML 版本迁移

## 🆘 需要帮助？

如果遇到问题：
1. 查看浏览器控制台（F12）
2. 检查 API 配置是否正确
3. 查看 [ENV_CONFIG.md](./ENV_CONFIG.md)
4. 查看 Dify API 文档

## 🎉 开始使用

现在你已经准备好了！运行 `npm run dev`，打开 http://localhost:3000，开始创作你的精灵图动画吧！

